// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-3.0
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3vUp":function(e,t,a){"use strict";a.r(t);var r=a("/MKj"),n=a("lwsE"),u=a.n(n),c=a("W8MJ"),o=a.n(c),i=a("7W2i"),l=a.n(i),s=a("a1gu"),m=a.n(s),h=a("Nsbk"),d=a.n(h),p=a("lSNA"),f=a.n(p),y=a("U+yc"),b=a.n(y),O=a("CB4y"),g=a("17x9"),v=a.n(g),D=a("q1tI"),C=a.n(D),j=a("J4zp"),N=a.n(j),E=a("KFoM"),k=a("9P9J"),w=a("Hidz"),R=a("CmTO"),x=a("dqkN"),Y=a("DZ3n"),P=a("A7wo"),I=a("lDQi"),S=a("3pFk"),H=a("bCQf");function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=Object(x.a)(R.b),_=Object(r.c)((function(e,t){return q(q({},t),{},{areItemsFetching:Object(I.I)(e,t),error:Object(I.a)(e,t),url:S.k(e,t)})}),(function(e,t){return{onCancelExpandedListValidation:function(){},onClickOutside:function(){return e(Object(P.j)())},onHoverCapture:function(t){return e(Object(P.g)(t))},onNextDay:function(){return e(Object(P.c)())},onPreviousDay:function(){return e(Object(P.d)())},onValidateExpandedList:function(t){var a=t.date,r=t.url;return e(Object(Y.e)({day:Object(H.a)(a),url:r}))}}}))(T),J=a("rXCy"),U=function(e){return function(t,a){return e.every((function(e){return a[e]===t[e]}))}},A=a("Jok1"),G=a("FGe3"),F=a("+q9O"),L=a("7lOs"),V=a("yLV6"),W=a.n(V),B=a("rJga"),K=a("GWeM"),z=function(e){var t=e.isHighlighted;return C.a.createElement(C.a.Fragment,null,C.a.createElement(X,e),t&&C.a.createElement(B.a,null,(function(e){var t=e.ref;return C.a.createElement("div",{className:"calendar-day-reference",ref:t})})))};z.displayName="CalendarDay",z.propTypes={date:v.a.object.isRequired,day:v.a.object.isRequired,index:v.a.number.isRequired,isHighlighted:v.a.bool,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,url:v.a.string.isRequired,onHoverDay:v.a.func.isRequired};var Q=function(e){return e.preventDefault()},X=function(e){var t=e.date,a=e.day,r=e.index,n=e.isHighlighted,u=e.maxNumberOfCaptures,c=e.minNumberOfCaptures,o=e.url,i=e.onHoverDay;if(!a||!("cn"in a))return r;var l,s=Object(H.a)(t),m=Object(K.a)(s,o),h=15+50*(Math.log(a.cn+1)-c)/Math.max(1,u-c);l="number"==typeof a.st?"s".concat(Math.floor(a.st/100),"xx"):"";var d=n?"highlighted":"",p=Object(D.useCallback)((function(){return i(Object(F.a)(t))}),[i,t]),f=Object(D.useRef)();return Object(D.useEffect)((function(){var e=new W.a(f.current);return e.on("tap",(function(){return i(Object(F.a)(t))})),function(){e.stop(),e.destroy()}}),[f]),C.a.createElement("div",{className:"calendar-day ".concat(d),ref:f,onTouchStart:Q,onTouchEnd:Q,onMouseOver:p},C.a.createElement("div",{className:"position",style:{width:h+"px",height:h+"px"}},C.a.createElement("div",{className:"measure ".concat(l)})),C.a.createElement("a",{href:m},r))};X.displayName="CalendarDayContent",X.propTypes={date:v.a.object.isRequired,day:v.a.object.isRequired,index:v.a.number.isRequired,isHighlighted:v.a.bool,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,url:v.a.string.isRequired,onHoverDay:v.a.func.isRequired};var Z=Object(D.memo)(z);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d()(e);if(t){var n=d()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return m()(this,a)}}var ee=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],te=function(e){l()(a,e);var t=$(a);function a(){return u()(this,a),t.apply(this,arguments)}return o()(a,[{key:"shouldComponentUpdate",value:function(e){var t=this;return["highlighted","weeksData","weeksInProgress","monthIndex","url","year"].some((function(a){return e[a]!==t.props[a]}))}},{key:"render",value:function(){var e=this.props,t=e.highlighted,a=e.maxNumberOfCaptures,r=e.minNumberOfCaptures,n=e.weeksData,u=e.weeksInProgress,c=e.monthIndex,o=e.url,i=e.year,l=e.onHoverDay,s=0;return C.a.createElement("div",{className:"month"},C.a.createElement("div",{className:"month-title"},ee[c]),C.a.createElement("div",{className:"month-body"},u?C.a.createElement("div",null,C.a.createElement(G.a,null)):n.map((function(e,n){return C.a.createElement("div",{className:"month-week",key:n},e.map((function(e,n){if(!e)return C.a.createElement("div",{className:"month-blank-day-container",key:n});++s;var u=Object(L.a)(i,c,s),m=Object(F.a)(u),h=!!t&&t.dayOfYear===m,d=h?"highlighted":"";return C.a.createElement("div",{className:"month-day-container ".concat(d),onMouseOver:function(e){h&&e.stopPropagation()},key:n},e&&C.a.createElement(Z,{date:u,day:e,index:s,isHighlighted:h,minNumberOfCaptures:r,maxNumberOfCaptures:a,url:o,onHoverDay:l}))})))}))))}}]),a}(C.a.Component);f()(te,"displayName","CalendarMonth"),f()(te,"propTypes",{highlighted:v.a.object,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,weeksData:v.a.any,weeksInProgress:v.a.bool,monthIndex:v.a.number.isRequired,url:v.a.string,year:v.a.number.isRequired,onHoverDay:v.a.func.isRequired});var ae="ontouchstart"in document.documentElement,re=function(){},ne=function(e){var t=e.captures,a=e.highlighted,r=e.highlightedDay,n=e.highlightedDayData,u=e.highlightedDayDataItems,c=e.maxNumberOfCapturesInOneDayOfYear,o=e.minNumberOfCapturesInOneDayOfYear,i=e.url,l=e.year,s=e.onHoverDay,m=e.onRollOutDay,h=Object(J.a)({onRun:m}),d=N()(h,3),p=d[0],f=d[1],y=d[2],b=Object(D.useCallback)((function(e){ae||f(),s(e)}));return C.a.createElement(E.c,null,C.a.createElement("div",{className:"calendar-grid"},t&&t.map((function(e,t){return C.a.createElement(te,{key:t,highlighted:a.month===t?a:null,maxNumberOfCaptures:c,minNumberOfCaptures:o,weeksData:e&&"weeks"in e?e.weeks:e,weeksInProgress:!!e&&e.inProgress,monthIndex:t,url:i,year:l,onHoverDay:b})}))),n&&C.a.createElement(k.a,{placement:"bottom-start",highlighted:a,modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!0,boundariesElement:document.documentElement}}},(function(e){var t=e.ref,a=e.style,c=e.placement,o=e.arrowProps,i=e.scheduleUpdate;return C.a.createElement(C.a.Fragment,null,C.a.createElement(A.a,{value:n,onChange:i}),C.a.createElement(A.a,{value:u,onChange:i}),C.a.createElement(_,{arrowRef:o.ref,arrowStyle:o.style,popperRef:t,popperStyle:a,popperPlacement:c,currentDay:r,items:u,total:n.total,onMouseOver:ae?re:f,onNewCaptures:i}))})),p&&C.a.createElement(w.a,{onMouseOver:y}))};ne.displayName="CalendarGridAnnualData",ne.propTypes={captures:v.a.array,highlighted:v.a.object,highlightedDay:v.a.object,highlightedDayData:v.a.any,highlightedDayDataItems:v.a.array,maxNumberOfCapturesInOneDayOfYear:v.a.number,minNumberOfCapturesInOneDayOfYear:v.a.number,url:v.a.string,year:v.a.number,onHoverDay:v.a.func.isRequired,onRollOutDay:v.a.func.isRequired};var ue=C.a.memo(ne,U(["captures","highlighted","highlightedDay","highlightedDayData","highlightedDayDataItems","maxNumberOfCapturesInOneDayOfYear","minNumberOfCapturesInOneDayOfYear","url","year"])),ce=Object(r.c)((function(e,t){return{captures:Object(I.h)(e,t),highlighted:Object(I.n)(e,t),highlightedDay:Object(I.o)(e,t),highlightedDayData:Object(I.p)(e,t),highlightedDayDataItems:Object(I.b)(e,t),maxNumberOfCapturesInOneDayOfYear:Object(I.r)(e,t),minNumberOfCapturesInOneDayOfYear:Object(I.t)(e,t),url:S.k(e,t),year:Object(I.y)(e,t)}}),(function(e,t){return{onHoverDay:function(t){return e(Object(P.b)(t))},onRollOutDay:function(t){return e(Object(P.j)())}}}))(ue),oe=a("HX93"),ie=a("429l"),le=function(e){var t=e.highlighted,a=e.maxNumberOfCaptures,r=e.minNumberOfCaptures,n=e.month,u=e.monthData,c=e.url,o=(e.week,e.year),i=e.onHoverDay,l=0;return u.map((function(e,u){return C.a.createElement("div",{className:"month-week",key:u},e.map((function(e,u){if(!e)return C.a.createElement("div",{className:"month-blank-day-container",key:u});++l;var s=Object(L.a)(o,n,l),m=Object(F.a)(s),h=!!t&&t.dayOfYear===m,d=h?"highlighted":"";return C.a.createElement("div",{className:"month-day-container ".concat(d),key:u},e&&C.a.createElement(Z,{date:s,day:e,index:l,isHighlighted:h,minNumberOfCaptures:r,maxNumberOfCaptures:a,url:c,onHoverDay:i}))})))}))};le.displayName="MonthGrid",le.propTypes={highlighted:v.a.object,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,month:v.a.number.isRequired,url:v.a.string,monthData:v.a.array,year:v.a.number.isRequired,onHoverDay:v.a.func};var se=function(e){var t=e.hasCaptures,a=e.highlighted,r=e.maxNumberOfCaptures,n=e.minNumberOfCaptures,u=e.month,c=e.monthScheme,o=e.weeksData,i=e.weeksError,l=e.weeksInProgress,s=e.url,m=e.year,h=e.onHoverDay,d=e.onMissedCaptures,p=Object(D.useCallback)((function(){return d(u)}),[u]);return Object(D.useEffect)((function(){!t||o||l||d(u)}),[t,s,m]),C.a.createElement("div",{className:"month"},C.a.createElement("div",{className:"month-title"},oe.b[u]),C.a.createElement("div",{className:"month-body"},i?C.a.createElement("div",{className:"month-body-container"},C.a.createElement(le,{highlighted:a,maxNumberOfCaptures:r,minNumberOfCaptures:n,month:u,url:s,monthData:c,year:m,onHoverDay:h}),C.a.createElement("div",{className:"caption-container"},C.a.createElement(ie.b,{className:"error-and-retry",error:i,onRetry:p}))):l?C.a.createElement("div",{className:"month-body-container"},C.a.createElement(le,{highlighted:a,maxNumberOfCaptures:r,minNumberOfCaptures:n,month:u,url:s,monthData:c,year:m,onHoverDay:h}),C.a.createElement("div",{className:"caption-container"},C.a.createElement("span",{className:"caption"},"loading..."))):C.a.createElement(le,{highlighted:a,maxNumberOfCaptures:r,minNumberOfCaptures:n,month:u,url:s,monthData:o||c,year:m,onHoverDay:h})))};se.displayName="CalendarMonth",se.propTypes={hasCaptures:v.a.bool.isRequired,highlighted:v.a.object,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,month:v.a.number.isRequired,monthScheme:v.a.array,weeksData:v.a.any,weeksError:v.a.string,weeksInProgress:v.a.bool,url:v.a.string,year:v.a.number.isRequired,onHoverDay:v.a.func.isRequired,onMissedCaptures:v.a.func.isRequired};var me=C.a.memo(se,U(["hasCaptures","highlighted","maxNumberOfCaptures","minNumberOfCaptures","month","monthScheme","weeksData","weeksError","weeksInProgress","url","year"])),he=Object(r.c)((function(e,t){return{maxNumberOfCaptures:Object(I.s)(e,t),minNumberOfCaptures:Object(I.u)(e,t),url:S.k(e,t),weeksData:Object(I.f)(e,t),weeksError:Object(I.e)(e,t),weeksInProgress:Object(I.J)(e,t),year:Object(I.y)(e,t)}}),(function(e,t){return{onMissedCaptures:function(t){return e(Object(Y.j)(t))}}}))(me),de=a("mxwW"),pe="ontouchstart"in document.documentElement,fe=function(){},ye=function(e){var t=e.calendarScheme,a=e.highlighted,r=e.highlightedDay,n=e.highlightedDayData,u=e.highlightedDayDataItems,c=e.numOfCapturePerMonth,o=e.year,i=e.onHoverDay,l=e.onRollOutDay,s=Object(J.a)({onRun:l}),m=N()(s,3),h=m[0],d=m[1],p=m[2],f=Object(D.useCallback)((function(e){pe||d(),i(e)}));return C.a.createElement(E.c,null,C.a.createElement("div",{className:"calendar-grid"},t&&t.map((function(e,t){return C.a.createElement(de.a,{key:"".concat(o).concat(t),partialVisibility:!0,scrollCheck:!0,scrollThrottle:30,intervalCheck:!1},(function(r){return r.hasSeen?C.a.createElement(he,{key:t,hasCaptures:c[t]>0,highlighted:a.month===t?a:null,month:t,monthScheme:e,onHoverDay:f}):C.a.createElement("div",{className:"month"})}))}))),n&&C.a.createElement(k.a,{placement:"bottom-start",highlighted:a,modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!0,boundariesElement:document.documentElement}}},(function(e){var t=e.ref,a=e.style,c=e.placement,o=e.arrowProps,i=e.scheduleUpdate;return C.a.createElement(C.a.Fragment,null,C.a.createElement(A.a,{value:n,onChange:i}),C.a.createElement(A.a,{value:u,onChange:i}),C.a.createElement(_,{arrowRef:o.ref,arrowStyle:o.style,popperRef:t,popperStyle:a,popperPlacement:c,currentDay:r,items:u,total:n.total,onMouseOver:pe?fe:d,onNewCaptures:i}))})),h&&C.a.createElement(w.a,{onMouseOver:p}))};ye.displayName="CalendarGridMonthlyData",ye.propTypes={calendarScheme:v.a.array,highlighted:v.a.object,highlightedDay:v.a.object,highlightedDayData:v.a.any,highlightedDayDataItems:v.a.array,numOfCapturePerMonth:v.a.array,year:v.a.number,onHoverDay:v.a.func,onRollOutDay:v.a.func};var be=C.a.memo(ye,U(["calendarScheme","highlighted","highlightedDay","highlightedDayData","highlightedDayDataItems","numOfCapturePerMonth","year"])),Oe=Object(r.c)((function(e,t){return{calendarScheme:Object(I.c)(e,t),highlighted:Object(I.n)(e,t),highlightedDay:Object(I.o)(e,t),highlightedDayData:Object(I.q)(e,t),highlightedDayDataItems:Object(I.b)(e,t),numOfCapturePerMonth:Object(I.v)(e,t),year:Object(I.y)(e,t)}}),(function(e,t){return{onHoverDay:function(t){return e(Object(P.b)(t))},onRollOutDay:function(t){return e(Object(P.j)())}}}))(be),ge=a("BpHd"),ve=a("20nU"),De=a("uz/6"),Ce=a("r77W"),je=function(e){var t=e.capture;return C.a.createElement("div",{className:"capture-details"},t&&C.a.createElement("div",null,C.a.createElement("a",{href:t.url,className:"capture-link"},t.caption),Object(Ce.a)(t.cl)?C.a.createElement("span",null," (why: No Collection Info)"):t.cl&&t.cl.length>0&&C.a.createElement("span",null," (why: ",t.cl.map((function(e){return C.a.createElement("a",{key:e,href:ve.a.url_collection_details_page.replace("{{collection}}",e)},e)})).reduce((function(e,t){return[e,", ",t]})),")")))};je.propTypes={capture:v.a.object},je.displayName="CaptureDetails";var Ne,Ee,ke,we=C.a.memo(je),Re=a("xMho");function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d()(e);if(t){var n=d()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return m()(this,a)}}var Ye=(ke=Ee=function(e){l()(a,e);var t=xe(a);function a(e){var r;return u()(this,a),(r=t.call(this,e))._debounceOneYearCaptures=Object(ge.a)(ve.a.calendar.captures_debounce_delay),r}return o()(a,[{key:"_fetchSelectedYearCaptures",value:function(){var e=this.props,t=e.capturesOfTheSelectedYearInProgress,a=e.hasCapturesOfTheSelectedYear,r=e.url,n=e.selected.year,u=e.typeOfGrid,c=e.onMissedYearCaptures;"annual"===u&&(a||t||this._debounceOneYearCaptures().then((function(){return c({url:r,year:n})})).catch(Object(ge.c)()))}},{key:"componentDidMount",value:function(){this._fetchSelectedYearCaptures()}},{key:"componentDidUpdate",value:function(e){e.url===this.props.url&&e.selected===this.props.selected||this._fetchSelectedYearCaptures()}},{key:"render",value:function(){var e=this.props,t=e.capturesOfTheSelectedYearInProgress,a=e.currentCapture,r=e.currentYearCapturesError,n=e.currentYearCapturesSummary,u=e.hasCapturesOfTheSelectedYear,c=e.typeOfGrid,o=e.url,i=e.onNextYear,l=e.onPreviousYear;return C.a.createElement("div",{className:"calendar-layout",onKeyUp:function(e){switch(e.key){case"ArrowLeft":l();break;case"ArrowRight":i()}},tabIndex:1},C.a.createElement(we,{capture:a}),"annual"===c?r?C.a.createElement("div",{className:"search-result-container container"},C.a.createElement(De.a,{error:r,onRetry:this._fetchSelectedYearCaptures})):!u||t?C.a.createElement(G.b,{className:"loader-container"}):C.a.createElement(ce,null):C.a.createElement(Oe,null),C.a.createElement(Re.a,{summary:n,url:o}))}}]),a}(C.a.PureComponent),f()(Ee,"displayName","CalendarLayout"),f()(Ee,"propTypes",{capturesOfTheSelectedYearInProgress:v.a.bool,currentCapture:v.a.object,currentYearCapturesError:v.a.string,currentYearCapturesSummary:v.a.object,hasCapturesOfTheSelectedYear:v.a.bool,selected:v.a.object,typeOfGrid:v.a.string,url:v.a.string,onMissedYearCaptures:v.a.func.isRequired,onNextYear:v.a.func.isRequired,onPreviousYear:v.a.func.isRequired}),Ne=ke,b()(Ne.prototype,"_fetchSelectedYearCaptures",[O.bind],Object.getOwnPropertyDescriptor(Ne.prototype,"_fetchSelectedYearCaptures"),Ne.prototype),Ne),Pe=C.a.memo(Ye);t.default=Object(r.c)((function(e,t){return{capturesOfTheSelectedYearInProgress:Object(I.K)(e,t),currentCapture:Object(I.m)(e,t),currentYearCapturesError:Object(I.g)(e,t),currentYearCapturesSummary:Object(I.l)(e,t),hasCapturesOfTheSelectedYear:Object(I.D)(e,t),selected:Object(I.w)(e,t),url:S.k(e,t),typeOfGrid:Object(I.B)(e,t)}}),(function(e,t){return{onMissedYearCaptures:function(t){return e(Object(Y.k)(t))},onNextYear:function(){return e(Object(P.h)())},onPreviousYear:function(){return e(Object(P.i)())}}}))(Pe)}}]);
//# sourceMappingURL=calendar.7974f4ef645682c1c50a.chunk.js.map
// @license-end
