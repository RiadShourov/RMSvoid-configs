<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>polkit - Gentoo Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"970af7a03591c8c4bc4f5580","wgCSPNonce":!1,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Polkit","wgTitle":"Polkit","wgCurRevisionId":903760,"wgRevisionId":903760,"wgArticleId":1675,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Core system"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Polkit","wgRelevantArticleId":1675,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSCurrentAutonym":"English","wgPageFormsTargetName":null,
"wgPageFormsAutocompleteValues":[],"wgPageFormsAutocompleteOnAllChars":!1,"wgPageFormsFieldProperties":[],"wgPageFormsCargoFields":[],"wgPageFormsDependentFields":[],"wgPageFormsCalendarValues":[],"wgPageFormsCalendarParams":[],"wgPageFormsCalendarHTML":null,"wgPageFormsGridValues":[],"wgPageFormsGridParams":[],"wgPageFormsContLangYes":null,"wgPageFormsContLangNo":null,"wgPageFormsContLangMonths":[],"wgPageFormsHeightForMinimizingInstances":800,"wgPageFormsShowOnSelect":[],"wgPageFormsScriptPath":"/extensions/PageForms","edgValues":null,"wgPageFormsEDSettings":null,"wgAmericanDates":!1,"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgULSPosition":"personal","wgEditSubmitButtonLabelPublish":!1};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","mediawiki.toc.styles":"ready","ext.uls.pt":"ready","ext.visualEditor.desktopArticleTarget.noscript":
"ready","ext.smw.style":"ready","ext.smw.tooltip.styles":"ready","mediawiki.skinning.interface":"ready","mediawiki.skinning.content.externallinks":"ready","skins.tyrian.styles":"ready","skins.tyrian.icons":"ready"};RLPAGEMODULES=["ext.smw.style","ext.smw.tooltips","ext.gentooPackages","smw.entityexaminer","site","mediawiki.page.startup","mediawiki.page.ready","mediawiki.toc","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="/load.php?lang=en&amp;modules=ext.pygments%7Cext.uls.pt%7Cext.visualEditor.desktopArticleTarget.noscript%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.toc.styles%7Cskins.tyrian.icons%2Cstyles&amp;only=styles&amp;skin=tyrian"/>
<link rel="stylesheet" href="/load.php?lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian"/>
<script async="" src="/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=tyrian"></script>
<link rel="stylesheet" href="https://assets.gentoo.org/tyrian/bootstrap.min.css"/><link rel="stylesheet" href="https://assets.gentoo.org/tyrian/tyrian.min.css"/><style>#mw-indicator-mw-helplink {display:none;}</style>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=tyrian"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="theme-color" content="#54487a"/>
<link rel="alternate" type="application/rdf+xml" title="Polkit" href="/index.php?title=Special:ExportRDF/Polkit&amp;xmlmime=rdf"/>
<link rel="shortcut icon" href="https://www.gentoo.org/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Gentoo Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="//wiki.gentoo.org/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"/>
<!--[if lt IE 9]><script src="/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Polkit rootpage-Polkit skin-tyrian action-view">	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://gitweb.gentoo.org/" title="Browse our source code in Gitweb"><span class="fa fa-code fa-fw"></span> Gitweb</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code in CVS"><span class="fa fa-code fa-fw"></span> CVS sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="/" title="Back to the homepage" class="site-logo"><object data="https://assets.gentoo.org/tyrian/site-logo.svg" type="image/svg+xml">
							<img src="https://assets.gentoo.org/tyrian/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="/wiki/Gentoo_Wiki:Menu-Gentoo" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu"><li id="n-Gentoo-Projects"><a href="/wiki/Project:Gentoo">Gentoo Projects</a></li>				</ul>
			</li>			<li class="dropdown">
				<a href="/wiki/Gentoo_Wiki:Menu-Documentation" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu"><li id="n-Gentoo-Handbook"><a href="/wiki/Handbook:Main_Page">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="/wiki/FAQ">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="/wiki/Project:Documentation/Overview">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="/wiki/Category:Core_system">Core system</a></li><li id="n-Hardware"><a href="/wiki/Category:Hardware">Hardware</a></li><li id="n-Software"><a href="/wiki/Category:Software">Software</a></li><li id="n-Desktop"><a href="/wiki/Category:Desktop">Desktop</a></li><li id="n-Server-.26-Security"><a href="/wiki/Category:Server_and_Security">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="/wiki/Category:Project_and_Community">Project &amp; Community</a></li>				</ul>
			</li>						</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Polkit" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Polkit" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="/index.php?title=Polkit&amp;oldid=903760" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="/index.php?title=Polkit&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="/wiki/Special:Browse/:Polkit" rel="search">Browse properties</a></li><li id="t-smwbrowselink"><a href="/wiki/Special:Browse/:Polkit" rel="search">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="fa fa-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="/index.php?title=Special:CreateAccount&amp;returnto=Polkit" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Polkit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-main" class="selected active"><a href="/wiki/Polkit" title="View the content page [c]" accesskey="c">Page</a></li><li id="ca-talk"><a href="/wiki/Talk:Polkit" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control"/>					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default"/></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="/index.php?title=Polkit&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="/index.php?title=Polkit&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="en">
							<span dir="auto">polkit</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
															</div>
												                <div id="jump-to-nav"></div>
					                <a class="mw-jump-link" href="#mw-head">Jump to:navigation</a>
					                <a class="mw-jump-link" href="#searchInput">Jump to:search</a>

							<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><span></span>
</p>
<div id="infobox-stack" class="list-group" style="width: 25em; float: right; clear: right; font-size: 90%; margin-left: 1em;">
<div class="list-group-item text-center" style="padding-top: 3px; padding-bottom: 3px; background-color: #463C65; color: white;"><b>Resources</b></div>
<div id="infobox" class="list-group-item" style="display: flex; align-items: center; padding: 5px; min-height: 3em;"><span style="display: inline-block; width: 3em; overflow: hidden; text-align: center;"><span class="fa fa-home fa-fw fa-2x"></span></span><span><a rel="nofollow" class="external text" href="http://www.freedesktop.org/wiki/Software/polkit">Home</a></span></div>
<div id="infobox" class="list-group-item" style="display: flex; align-items: center; padding: 5px; min-height: 3em;"><span style="display: inline-block; width: 3em; overflow: hidden; text-align: center;"><span class="fa fa-wikipedia-w fa-fw fa-2x"></span></span><span><a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/PolicyKit">Wikipedia</a></span></div>
</div>
<p><b>polkit</b> (formerly <b>PolicyKit</b>) is an authorization API intended to be used by privileged programs (e.g. system daemons) offering services to unprivileged programs.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Prerequisites"><span class="tocnumber">2.1</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#USE_flags"><span class="tocnumber">2.2</span> <span class="toctext">USE flags</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Rules"><span class="tocnumber">3.1</span> <span class="toctext">Rules</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Usage"><span class="tocnumber">4</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Troubleshooting"><span class="tocnumber">5</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>Privileged programs (in the following called daemons) with polkit support offload the decision as to whether a program is allowed to use some function of the daemon. The daemon keeps an incoming request on hold, asks polkit if the program is authorized, and then allows or denies the request based on polkit's return. The requesting program is not aware of polkit and so needs no polkit support itself. The communication is handled over <a href="/wiki/D-Bus" title="D-Bus">D-Bus</a>.
</p><p>Daemons come with polkit action files, which offer some function and define who is authorized. This can be any user, either the <a href="/index.php?title=ConsoleKit&amp;action=edit&amp;redlink=1" class="new" title="ConsoleKit (page does not exist)">active or inactive user</a>. Also they can specify that the user needs to authenticate by entering a password as himself or as admin. These actions do not grant root permission to an entire process, but rather allows a finer level of control of centralized system policy.
</p><p>The authorization defaults defined by the action files can be refined by rules files. Here you can define who's admin (root or any user in a special group) and add special handling for an action.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />When updating, refer to the polkit <a href="/wiki/Polkit/upgrade" title="Polkit/upgrade">upgrade subpage</a>.</div>
<h3><span class="mw-headline" id="Prerequisites">Prerequisites</span></h3>
<p>Polkit uses <a href="/wiki/D-Bus" title="D-Bus">D-Bus</a>, so set it up first.
</p><p>Also, make sure you set <code>CONFIG_FUTEX=y</code> in the kernel. Without this option selected, the <span style="font-family: monospace; font-size: 95%; font-weight: bold;" class="tripleclick-separator">polkitd</span> process may generate high CPU.
</p>
<h3><span class="mw-headline" id="USE_flags">USE flags</span></h3>
<p>Portage knows the global <code>policykit</code> USE flag for enabling support for polkit in other packages. Enabling this USE flag will pull in <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-auth/polkit">sys-auth/polkit</a> automatically (default for <i>desktop</i> <a href="/wiki/Profile_(Portage)" title="Profile (Portage)">profiles</a>):
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong></strong></div><pre class="captioned"><div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;policykit&quot;</span>
</pre></div></pre>
<p>The USE flags of <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-auth/polkit">sys-auth/polkit</a> are:
</p><p class="mw-empty-elt">      </p><div class="panel panel-default gp-panel">
        <div class="panel-heading gp-panel-heading">
          <h3 class="panel-title">
            <span class="text-muted">USE flags for</span>
            <a href="https://packages.gentoo.org/packages/sys-auth/polkit">sys-auth/polkit</a>
            <small><span class="fa fa-external-link-square"></span></small>
            <small class="gp-pkg-desc">Policy framework for controlling privileges for system-wide services</small>
          </h3>
        </div>
        <div class="table-responsive gp-useflag-table-container">
                <table class="table gp-useflag-table">        <tbody><tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/elogind">elogind</a></code>
          </td>
          <td>
            Use sys-auth/elogind for session tracking
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/examples">examples</a></code>
          </td>
          <td>
            Install examples, usually source code
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/gtk">gtk</a></code>
          </td>
          <td>
            Add support for x11-libs/gtk+ (The GIMP Toolkit)
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/introspection">introspection</a></code>
          </td>
          <td>
            Add support for GObject based introspection
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/jit">jit</a></code>
          </td>
          <td>
            Enable just-in-time compilation for improved performance. May prevent use of some PaX memory protection features in Gentoo Hardened.
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/kde">kde</a></code>
          </td>
          <td>
            Add support for software made by KDE, a free software community
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/nls">nls</a></code>
          </td>
          <td>
            Add Native Language Support (using gettextGNU locale utilities)
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/pam">pam</a></code>
          </td>
          <td>
            Add support for PAM (Pluggable Authentication Modules)DANGEROUS to arbitrarily flip
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/selinux">selinux</a></code>
          </td>
          <td>
            !!internal use only!! Security Enhanced Linux support, this must be set by the selinux profile or breakage will occur
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/systemd">systemd</a></code>
          </td>
          <td>
            Use sys-apps/systemd for session tracking
          </td>
        </tr>        <tr>
          <td>
            <code><a href="https://packages.gentoo.org/useflags/test">test</a></code>
          </td>
          <td>
            Enable dependencies and/or preparations necessary to run tests (usually controlled by FEATURES=test but can be toggled independently)
          </td>
        </tr>      </tbody></table>
        </div>
        <div class="panel-footer gp-panel-footer">
          <small class="pull-right">
            Data provided by the <a href="https://packages.gentoo.org">Gentoo Package Database</a>
            &#183;
            Last update: 2020-12-28 17:35
          </small>
          <small>
            <a href="/wiki/Handbook:AMD64/Working/USE">More information about USE flags</a>
          </small>
        </div>
      </div>
<p class="mw-empty-elt"></p><p>After setting this you want to update your system so the changes take effect:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask&#160;--changed-use --deep @world</code></div></div> 
<p>Depending on above USE flag settings, either <a href="/wiki/Elogind" title="Elogind">elogind</a> or <a href="/wiki/Systemd" title="Systemd">systemd</a> need to be configured.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>The actions files are in <span style="font-family: monospace; font-size: 95%">/usr/share/polkit-1/actions</span>, the rules files are in <span style="font-family: monospace; font-size: 95%">/usr/share/polkit-1/rules.d</span> and <span style="font-family: monospace; font-size: 95%">/etc/polkit-1/rules.d</span>.
</p>
<h3><span class="mw-headline" id="Rules">Rules</span></h3>
<p>Rules redefine who's authorized for an action. The rules files begin with a number and are processed in lexical order. The first file with a matching rule is used. Own files should have a low number, like <i>10</i>. The filenames have the <span style="font-family: monospace; font-size: 95%">.rules</span> suffix.
</p><p>For example, to let the users of the <span style="font-family: monospace; font-size: 95%; font-weight: bold;" class="tripleclick-separator">wheel</span> group also perform functions as administrators, create the following file:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/polkit-1/rules.d/10-admin.rules</code></strong><strong></strong></div><pre class="captioned"><div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">polkit</span><span class="p">.</span><span class="nx">addAdminRule</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">action</span><span class="p">,</span> <span class="nx">subject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;unix-group:wheel&quot;</span><span class="p">];</span>
<span class="p">});</span>
</pre></div></pre>
<p>To allow user <span style="font-family: monospace; font-size: 95%; font-weight: bold;" class="tripleclick-separator">larry</span> to mount disks, create the following file:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/polkit-1/rules.d/10-udisks.rules</code></strong><strong></strong></div><pre class="captioned"><div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">polkit</span><span class="p">.</span><span class="nx">addRule</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">action</span><span class="p">,</span> <span class="nx">subject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="s2">&quot;org.freedesktop.udisks2.filesystem-mount&quot;</span> <span class="o">&amp;&amp;</span>
        <span class="nx">subject</span><span class="p">.</span><span class="nx">user</span> <span class="o">==</span> <span class="s2">&quot;larry&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">polkit</span><span class="p">.</span><span class="nx">Result</span><span class="p">.</span><span class="nx">YES</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div></pre>
<p>See <span style="font-family: monospace; font-size: 95%; font-weight: bold;" class="tripleclick-separator">man polkit</span> for more information.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Show all available actions:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>pkaction</code></div></div>
<p>Show details about the given action:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>pkaction --verbose --action-id ACTION</code></div></div>
<p>List all temporary authorizations for the current session:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>pkcheck --list-temp</code></div></div>
<p>Runs the given program with the user rights of the given user:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>pkexec --user USER PROGRAM</code></div></div>
<p>For more information see the <a href="/wiki/Man_page" title="Man page">man pages</a>, e.g. for <span style="font-family: monospace; font-size: 95%; font-weight: bold;" class="tripleclick-separator">pkaction</span>: <span style="font-family: monospace; font-size: 95%; font-weight: bold;" class="tripleclick-separator">man pkaction</span>
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<ul><li><span class="fa fa-bug fa-fw"></span><a rel="nofollow" class="external text" href="https://bugs.gentoo.org/buglist.cgi?quicksearch=polkit&amp;order=bug_id%20DESC">Gentoo bugtracker: known bugs</a></li>
<li>Polkit communicates over D-Bus, so also see the <a href="/wiki/D-Bus#Troubleshooting" title="D-Bus">D-Bus "Troubleshooting" section</a>.</li></ul>
<!-- 
NewPP limit report
Cached time: 20210128081411
Cache expiry: 86400
Dynamic content: false
Complications: []
[SMW] In‐text annotation parser time: 0.005 seconds
CPU time usage: 0.108 seconds
Real time usage: 0.906 seconds
Preprocessor visited node count: 1076/1000000
Post‐expand include size: 17487/2097152 bytes
Template argument size: 5154/2097152 bytes
Highest expansion depth: 16/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 6050/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  857.216      1 -total
 90.02%  771.650      1 Template:USEflag
  2.24%   19.172      1 Template:InfoBox_stack
  1.87%   16.003      1 Template:Emerge
  1.42%   12.159      5 Template:GenericCmd
  1.36%   11.695      1 Template:RootCmd
  1.25%   10.700      1 Template:Bug
  1.18%   10.113      2 Template:InfoBox
  1.09%    9.340      1 Template:InfoBox_homepage
  1.02%    8.710      4 Template:Cmd
-->

<!-- Saved in parser cache with key gentoo?hwiki:pcache:idhash:1675-0!canonical and timestamp 20210128081410 and revision id 903760
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.gentoo.org/index.php?title=Polkit&amp;oldid=903760">https://wiki.gentoo.org/index.php?title=Polkit&amp;oldid=903760</a>"</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/wiki/Category:Core_system" title="Category:Core system">Core system</a></li></ul></div></div>						</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
							<li id="lastmod>"> This page was last edited on 7 December 2020, at 12:14.</li><li id="privacy>"><a href="/wiki/Gentoo_Wiki:Privacy_policy" class="mw-redirect" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li><li id="about>"><a href="/wiki/Gentoo_Wiki:About" title="Gentoo Wiki:About">About Gentoo Wiki</a></li><li id="disclaimer>"><a href="/wiki/Gentoo_Wiki:General_disclaimer" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>						</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
						<li></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2021 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
<script>
function defer(method) {
    if (window.jQuery) {
        method();
    } else {
        setTimeout(function() { defer(method) }, 50);
    }
}
defer(function() { mw.loader.load( 'https://assets.gentoo.org/tyrian/bootstrap.min.js'); });
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"smw":{"limitreport-intext-parsertime":0.005},"limitreport":{"cputime":"0.108","walltime":"0.906","ppvisitednodes":{"value":1076,"limit":1000000},"postexpandincludesize":{"value":17487,"limit":2097152},"templateargumentsize":{"value":5154,"limit":2097152},"expansiondepth":{"value":16,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":6050,"limit":5000000},"timingprofile":["100.00%  857.216      1 -total"," 90.02%  771.650      1 Template:USEflag","  2.24%   19.172      1 Template:InfoBox_stack","  1.87%   16.003      1 Template:Emerge","  1.42%   12.159      5 Template:GenericCmd","  1.36%   11.695      1 Template:RootCmd","  1.25%   10.700      1 Template:Bug","  1.18%   10.113      2 Template:InfoBox","  1.09%    9.340      1 Template:InfoBox_homepage","  1.02%    8.710      4 Template:Cmd"]},"cachereport":{"timestamp":"20210128081411","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":97});});</script></body></html>